


#排列组合
基本的高中排列组合的知识其实就够用了，不过这里总结排列组合中的几个有趣的问题.

**多重集合的排列:**

设集合 $S = \{n_1*a_1,n_2*a_2,...,n_i*a_i,...,n_k*a_k\}$,即有$n_i个对象a_i$，问集合$S$的排列总数，其中 $\sum_{i = 1}^kn_i = n$.
$$
\frac{n!}{n_1!n_2!*\dots *n_k!}
$$
我们用两种不同的方式来几数对每个对象有标号(即每个对象都不同)情况下的全排列个数。

显然上面的每一种答案，同一种对象之间进行全排列都会产生一种新的答案，即
$x*n_1!*n_2!*\dots * n_k! = n$.所以得到$x =\frac{n!}{n_1!n_2!*\dots *n_k!}$

**多重集合的组合**
设集合$S = \{n_1*a_1,n_2*a_2,...,n_i*a_i,...,n_m*a_m\}的k$ 组合的数目，其中 $n_i\ge k$.
$$
\binom{m+k-1}{m}
$$
设这样的组合中$a_i的数目为x_i$.即转化为求
$$
x_1+x_2+\dots +x_m = k
$$
的非负整数解的数目.

可以看作是用$m-1个加号把k个1分开$,换句话说就是集合 $\{k*1,(m-1)*+\}$ 的排列数目.由上面的结论得到上式

**圆排列**
$\frac{n!}{n}$
#容斥原理
##两个结论
设不具有性质$P_i的集合为A_i$
1. 不具有性质$P_1,P_2,\dots ,P_n的元素个数$

    $|\bar{A_1}\cap\bar{A_2}\cap\dots\cap\bar{A_n}| = |S|-\sum|A_i|+(-1)^2\sum|A_i\cap A_j|+\dots+(-1)^k\sum|A_{i_1}\cap A_{i_2}\cap \dots \cap A_{i_k}|$

2. 具有性质之一的集合个数

  $$
  |S|减掉上面的个数(补集)
  $$

对应到程序中就是，用二进制枚举集合，记下集合的个数。然后在加加减减.这种题目都是这样的

##简单应用.
* $a_1,a_2,\dots ,a_m个数问(1\sim n)整除其中一个的个数$.

  利用第二个结论,交集就是最小公倍数，而对于任意一个数 $m$ 来说整除他的个数就是 $\frac{n}{m}$ 所以总的复杂度就是 $O(2^m)$

* **错位排列$D_n$**

  $n$ 个人,每个人都有一个不同的帽子，设第$i$ 个人的帽子为$i$号,求没有人拿回自己的帽子的总数.

  即排列$i_1i_2,\dots,i_n，s.t,任意 k, i_k \neq k$

  设$A_i表示i号在子自己位置上$，用容斥定理我们有
  $|A_{i_1}\cap A_{i_2}\cap A_{i_3}\cap,\dots ,A_{i_k}| = (n-k)!$

  因此
  $$
  \begin{align}
  D_n&= n!-\binom{n}{1}(n-1)!+\binom{n}{2}(n-2)!+\dots +(-1)^k\binom{n}{k}(n-k)!+\dots
  \end{align}
  $$

  **错位排列中一些便于求值的性质**

  1. $D_n = (n-1)(D_{n-1}+D_{n-2})$
  2. $D_n = nD_{n-1}+(-1)^{n-2}$
* **相对禁止位置的排列计数**

  对于一个$n$排列.所谓相对禁止位置就是说不出现模式 $12,23,\dots,(n-1)n$,$A_i$表示出现模式$i(i+1)$

  $|A_i| = (n-1)!$

  $|A_{i_1}\cap A_{i_2}\cap A_{i_3}\cap,\dots ,A_{i_k}| = (n-k)!$
  $$
  \begin{align}
  Q_n &= n!-\binom{n}{1}(n-1)!+\binom{n}{2}(n-2)!+\dots\\  &+(-1)^k\binom{n}{k}(n-k)!+\dots+(-1)^{n-1}\binom{n}{n-1}1!\\
  &=D_n+D_{n-1}
  \end{align}
  $$

**参考**

以上内容详见《组合数学》
